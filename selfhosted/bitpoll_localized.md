# рдмрд┐рдЯрдкреЛрд▓ (Bitpoll)
рдмрд┐рдЯрдкреЛрд▓ рдПрдХ рд╕реЙрдлрд╝реНрдЯрд╡реЗрдпрд░ рд╣реИ рдЬреЛ рддрд╛рд░реАрдЦрд╝реЛрдВ, рд╕рдордп рдпрд╛ рд╕рд╛рдорд╛рдиреНрдп рдкреНрд░рд╢реНрдиреЛрдВ рдкрд░ рдкреЛрд▓ (рдорддрджрд╛рди) рдЖрдпреЛрдЬрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рд╣реИред
рдпрд╣ opatuit рдХреЗ Dudel (https://github.com/opatut/dudel) рдХрд╛ рдПрдХ рдирдпрд╛ рд╕рдВрд╕реНрдХрд░рдг рд╣реИ, рдЬреЛ https://bitpoll.de рдкрд░ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдФрд░ рдЗрд╕реЗ Django рдлрд╝реНрд░реЗрдорд╡рд░реНрдХ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреБрдирд░реНрд▓рд┐рдЦрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред
## Docker рдХрд╛ рдЙрдкрдпреЛрдЧ
рдбреЙрдХрд░ рдЗрдореЗрдЬ рд╡рд░реНрддрдорд╛рди рдорд╛рд╕реНрдЯрд░ рдмреНрд░рд╛рдВрдЪ рд╕реЗ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдмрдирд╛рдИ рдЬрд╛рддреА рд╣реИред  
рдЖрдк рдбреЙрдХрд░ рдХрдВрдЯреЗрдирд░ рд╕реЗрдЯрдЕрдк рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдбреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред
### рд╕реНрдЯреИрдЯрд┐рдХ рдФрд░ рдХреЙрдиреНрдлрд╝рд┐рдЧ рдлрд╝рд╛рдЗрд▓реЛрдВ рдХреЗ рд▓рд┐рдП рдПрдХ рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдмрдирд╛рдПрдБ:
```bash
mkdir -p run/{log,static,config}
```

### рдЙрджрд╛рд╣рд░рдг рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдлрд╝рд╛рдЗрд▓ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ рдФрд░ рдЕрдкрдиреА рдЖрд╡рд╢реНрдпрдХрддрд╛рдУрдВ рдХреЗ рдЕрдиреБрд╕рд╛рд░ рдЗрд╕реЗ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВ:
```bash
wget https://raw.githubusercontent.com/fsinfuhh/Bitpoll/master/bitpoll/settings_local.sample.py -O run/config/settings.py
```


### рдпрд╣ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИ рдХрд┐ рдЖрдк рдХрдо рд╕реЗ рдХрдо рдбреЗрдЯрд╛рдмреЗрд╕ рд╕реЗрдЯрд┐рдВрдЧреНрд╕, рд╕реАрдХреНрд░реЗрдЯ рдХреА рдФрд░ рдЕрд▓рд╛рдЙрдб рд╣реЛрд╕реНрдЯреНрд╕ рдХреЛ рдмрджрд▓реЗрдВред  
### рдбреЙрдХрд░ рдХрдВрдЯреЗрдирд░ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ:
```bash
docker run -a stdout -a stderr --rm --name bitpoll -p 3008:3008 -p 3009:3009 --volume ./run/static:/opt/static --volume ./run/config:/opt/config ghcr.io/fsinfuhh/bitpoll
```
рдХрдВрдЯреЗрдирд░ рдкреЛрд░реНрдЯ 3009 рдкрд░ рдЙрдкрд▓рдмреНрдз рд╣реИред
рдпрджрд┐ рдЖрдк рдХрд┐рд╕реА рдмрд╛рд╣рд░реА рд╡реЗрдм рд╕рд░реНрд╡рд░ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВ, рддреЛ рдЖрдк рдкреЛрд░реНрдЯ 3008 рдкрд░ uwsgi рдЯреНрд░реИрдлрд╝рд┐рдХ рдХреЛ рдЕрдЧреНрд░реЗрд╖рд┐рдд рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ run/static рд╕реЗ static рддрдХ рд╕реНрдерд┐рд░ рд╕рдВрд╕рд╛рдзрди рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред  

## рдореИрдиреБрдЕрд▓ рдЗрдВрд╕реНрдЯреЙрд▓
рдХреЛрдб рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ:
```bash
git clone https://github.com/fsinfuhh/Bitpoll
```

## Python рд╡рд░реНрдЪреБрдЕрд▓рдПрдиреНрд╡ (virtualenv) рдмрдирд╛рдПрдВ рдФрд░ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ
```bash
virtualenv -p $(which python3) .pyenv
source .pyenv/bin/activate
pip install -r requirements.txt
```

bitpoll/settings_local.sample.py рдХреЛ bitpoll/settings_local.py рдореЗрдВ рдХреЙрдкреА рдХрд░реЗрдВ рдФрд░ рд╕реНрдерд╛рдиреАрдп рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдХреЛ рдЕрдиреБрдХреВрд▓рд┐рдд рдХрд░реЗрдВред
### рдбреЗрдЯрд╛рдмреЗрд╕ рдкреНрд░рд╛рд░рдВрдн рдХрд░реЗрдВ:
```bash
./manage.py migrate
```

### рдЯреЗрд╕реНрдЯ рд╕рд░реНрд╡рд░ рдЪрд▓рд╛рдПрдБ:
```bash
./manage.py runserver
```

## рдкреНрд░реЛрдбрдХреНрд╢рди (Production)
рдкреНрд░реЛрдбрдХреНрд╢рди рдореЗрдВ рддреНрд░реБрдЯрд┐ рд░рд┐рдкреЛрд░реНрдЯрд┐рдВрдЧ (error reporting) рдХреЗ рд▓рд┐рдП *Sentry* рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  
*django-auth-ldap* рдХрд╛ рдЙрдкрдпреЛрдЧ LDAP рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд▓реЙрдЧрд┐рди рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред  
*uWSGI* рдХрд╛ рдЙрдкрдпреЛрдЧ рдРрдк рдХреЛ рд╕рд░реНрд╡ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред

### рдкреНрд░реЛрдбрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
```bash
sudo apt install g++ make python3-psycopg2 python3-ldap3 gettext gcc python3-dev libldap2-dev libsasl2-dev
```

### Python рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ:
```bash
pip install -r requirements-production.txt
```

рдХреЙрдиреНрдлрд╝рд┐рдЧрд░реЗрд╢рди рдЙрджрд╛рд╣рд░рдг settings_local.py рдореЗрдВ рджрд┐рдП рдЧрдП рд╣реИрдВред
рд╣рдорд╛рд░рд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ рдЧрдпрд╛ uWSGI рдХреЙрдиреНрдлрд╝рд┐рдЧ рдпрд╣рд╛рдБ рдкрд╛рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:  
<https://github.com/fsinfuhh/mafiasi-rkt/blob/master/bitpoll/uwsgi-bitpoll.ini>

### рдкреНрд░реЛрдбрдХреНрд╢рди рд╕рд┐рд╕реНрдЯрдореНрд╕ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдЪрд▓рд╛рдирд╛ рдЖрд╡рд╢реНрдпрдХ рд╣реИ:
```bash
./manage.py compilemessages
./manage.py collectstatic
```

## рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХрд╛ рдкреНрд░рдмрдВрдзрди (Management of Dependencies)
рд╣рдо рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХреЛ рдкреНрд░рдмрдВрдзрд┐рдд рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП *pip-tools* рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рддреЗ рд╣реИрдВред  
requirements*.in рдлрд╝рд╛рдЗрд▓реЛрдВ рдореЗрдВ рдХрд┐рд╕реА рд╕рдВрд╢реЛрдзрди рдпрд╛ рдкреИрдХреЗрдЬреЛрдВ рдХреЗ рдЕрдкрдбреЗрдЯ рдХреЗ рдмрд╛рдж рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ:
```bash
pip-compile --upgrade --output-file requirements.txt requirements.in
pip-compile --upgrade --output-file requirements-production.txt  requirements-production.in requirements.in
```

рдЕрдкрдирд╛ рд╡рд╛рддрд╛рд╡рд░рдг (environment) requirements.txt рдХреЗ рд╕рд╛рде рд╕рд┐рдВрдХ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдпрд╣ рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдБ:
```bash
pip-sync
```

рдпрд╣ рд╡рд░реНрдЪреБрдЕрд▓рдПрдиреНрд╡ рдореЗрдВ рдЖрд╡рд╢реНрдпрдХ рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реАрдЬрд╝ рдХреЛ рдЗрдВрд╕реНрдЯреЙрд▓ рдпрд╛ рдбрд┐рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдЧрд╛ рддрд╛рдХрд┐ рдпрд╣ requirements рдлрд╝рд╛рдЗрд▓ рд╕реЗ рдореЗрд▓ рдЦрд╛ рд╕рдХреЗред
ЁЯОе Demo Video

Google Drive Public Link:
https://drive.google.com/file/d/1RNxf38iXBxW72Lz0qmf_Ma3iV3zvf245/view?usp=sharing
LinkedIn Post

https://www.linkedin.com/posts/snehith-eadhara-90137938b_opensource-django-selfhosted-activity-7398967587117731841-t2Ks
Team Members

Snehith Eadhara
Siva sai Bachu
